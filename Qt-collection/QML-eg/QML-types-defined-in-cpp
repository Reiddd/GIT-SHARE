/*
  create a [Qt Quick Application] project
  
  uncheck the [With ui.qml file] option in the [Define Project Details] section of [New Project Wizard]
*/

//-------backend.h-------
#ifndef BACKEND_H
#define BACKEND_H

#include <QObject>
#include <QString>

class BackEnd: public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString userName READ userName WRITE setUserName NOTIFY userNameChanged)
    
public:
    explicit BackEnd(QObject* parent = nullptr);

    QString userName();
    void setUserName(const QString& userName);

signals:
    void userNameChanged();
    
private:
    QString m_userName;
};

#endif

//-------backend.cpp-------
#include "backend.h"

BackEnd::BackEnd(QObject* parent): QObject(parent){}

QString BackEnd::userName()
{
    return m_userName;
}

void BackEnd::setUserName(const QString& userName)
{
    if(userName == m_userName)
        return;
        
    m_userName = userName;
    
    emit userNameChanged();
}

//-------main.cpp-------
#include <QGuiApplication>
#include <QQmlApplicationEngine>

#include "backend.h"

int main(int argc, char* argv[])
{
    QGuiApplication app(argc,argv);
    
    qmlRegisterType<BackEnd>("io.qt.examples.backend", 1, 0,"BackEnd");
    
    QQmlApplicationEngine engine;
    engine.load(QUrl(QStringLiteral("qrc:/main.qml")));
    
    return app.exec();
}

//-------main.qml-------
import QtQuick 2.6
import QtQuick.Controls 2.0
import io.qt.examples.backend 1.0  //

ApplictionWindow{
    id: root
    width: 300
    height: 480
    visible: true
    
    BackEnd{
        id: backend
    }
    
    TextField{
        text: backend.userName
        placeholderText: qsTr("User name")
        anchors.centerIn: parent
        
        onTextChanged: backend.userName = text
    }
}
